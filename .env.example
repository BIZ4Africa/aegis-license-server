# AEGIS License Server - Environment Configuration
# Copy this file to .env and update with your values

# ================================================================
# APPLICATION
# ================================================================

# Application name (display purposes)
APP_NAME=AEGIS License Server

# Application version (automatically managed by bumpversion)
APP_VERSION=0.8.0

# Debug mode (true for development, false for production)
DEBUG=false

# Environment: development, staging, production
ENVIRONMENT=production

# ================================================================
# SERVER
# ================================================================

# Server host (0.0.0.0 allows external connections)
HOST=0.0.0.0

# Server port
PORT=8000

# Auto-reload on code changes (development only)
RELOAD=false

# ================================================================
# DATABASE
# ================================================================

# PostgreSQL connection URL (REQUIRED)
# Format: postgresql+asyncpg://user:password@host:port/database
# Example: postgresql+asyncpg://aegis:SecurePass123@postgres:5432/aegis
DATABASE_URL=postgresql+asyncpg://aegis:CHANGE_ME_STRONG_PASSWORD@postgres:5432/aegis

# Echo SQL queries to logs (development only)
DB_ECHO=false

# Database connection pool size
DB_POOL_SIZE=5

# Max overflow connections beyond pool size
DB_MAX_OVERFLOW=10

# ================================================================
# SECURITY - SIGNING KEYS
# ================================================================

# Path to Ed25519 private key (REQUIRED)
# CRITICAL: Keep this file secure (0600 permissions)
# Generate with: python scripts/generate_keys.py --key-id aegis-2026-01
PRIVATE_KEY_PATH=keys/aegis-2026-01.private.pem

# Path to Ed25519 public key
PUBLIC_KEY_PATH=keys/aegis-2026-01.public.pem

# Key ID for JWT 'kid' header (for key rotation)
KEY_ID=aegis-2026-01

# Passphrase for encrypted private key (REQUIRED in production)
# Generate strong passphrase: python -c "import secrets; print(secrets.token_urlsafe(32))"
PRIVATE_KEY_PASSPHRASE=CHANGE_ME_STRONG_PASSPHRASE

# ================================================================
# SECURITY - API AUTHENTICATION
# ================================================================

# API secret key for authentication (REQUIRED)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# CRITICAL: Must be at least 64 characters long
API_SECRET_KEY=CHANGE_ME_USE_LONG_RANDOM_STRING_MINIMUM_64_CHARACTERS_EXAMPLE_1234567890abcdefghijklmnopqrstuvwxyz

# API access token expiration time (minutes)
API_ACCESS_TOKEN_EXPIRE_MINUTES=60

# ================================================================
# LICENSE SETTINGS
# ================================================================

# License issuer URL (appears in JWT 'iss' claim)
# Should be your production license server domain
LICENSE_ISSUER=https://license.biz4a.com

# Default demo license duration (days)
DEFAULT_DEMO_DURATION_DAYS=30

# ================================================================
# RATE LIMITING
# ================================================================

# Enable rate limiting (recommended: true)
RATE_LIMIT_ENABLED=true

# Maximum requests per minute per IP
RATE_LIMIT_REQUESTS=100

# ================================================================
# CORS (Cross-Origin Resource Sharing)
# ================================================================

# Enable CORS (set to true if accessing from web browsers)
CORS_ENABLED=true

# Allowed CORS origins (comma-separated list)
# Examples: http://localhost:3000,https://portal.biz4a.com
CORS_ORIGINS=["http://localhost:3000","https://portal.biz4a.com"]

# ================================================================
# LOGGING
# ================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use INFO for production, DEBUG for development
LOG_LEVEL=INFO

# Log format: json (production) or text (development)
# json format is better for log aggregation systems
LOG_FORMAT=json

# ================================================================
# PRODUCTION SECURITY CHECKLIST
# ================================================================
#
# Before deploying to production, ensure you have:
#
# 1. ✅ Changed ALL "CHANGE_ME" values above
# 2. ✅ Generated strong random secrets (64+ characters)
# 3. ✅ Created secure database password
# 4. ✅ Generated Ed25519 keypair
# 5. ✅ Set ENVIRONMENT=production
# 6. ✅ Set DEBUG=false
# 7. ✅ Set LOG_FORMAT=json
# 8. ✅ Configured CORS_ORIGINS for your domain
# 9. ✅ Set file permissions on .env to 0600
# 10. ✅ Never commit .env to version control
#
# ================================================================
